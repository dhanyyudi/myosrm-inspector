# OSRM Inspector

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

OSRM Inspector is a modern frontend application for examining, testing, and visualizing routes generated by the [OSRM (Open Source Routing Machine)](http://project-osrm.org/). The application provides an intuitive and feature-rich interface for users who want to interact with OSRM services.

![OSRM Inspector Screenshot](https://via.placeholder.com/800x450.png?text=OSRM+Inspector+Screenshot)

## üåü Key Features

- **Flexible Route Finding**: Support for multiple waypoints with drag-and-drop functionality
- **Multiple Profiles**: Support for various routing profiles (driving, walking, cycling, truck, etc.)
- **Debug Visualization**: Display nodes, edges, cells, turns, speed, and road names
- **Detailed Route Info**: Display distance, duration, turn-by-turn instructions, and average speed
- **Time-Dependent Routing**: Support for time-based routing (depending on traffic data availability)
- **Import/Export**: Import waypoints from CSV files and copy/paste routing URLs
- **Modern UI**: Responsive and intuitive user interface with a modern blue theme

## üöÄ Getting Started with Docker

### Prerequisites

- [Docker](https://www.docker.com/get-started) installed on your system
- Access to a running OSRM backend (local or remote)

### Setting Up the OSRM Backend with Docker

Before running OSRM Inspector, you need an OSRM backend. Here are the basic steps to run one with Docker:

```bash
# Download sample map data (Indonesia)
mkdir -p osrm-data
cd osrm-data
wget https://download.geofabrik.de/asia/indonesia-latest.osm.pbf

# Set up OSRM backend with car profile
docker run -t -v "${PWD}:/data" osrm/osrm-backend osrm-extract -p /opt/car.lua /data/indonesia-latest.osm.pbf
docker run -t -v "${PWD}:/data" osrm/osrm-backend osrm-partition /data/indonesia-latest.osrm
docker run -t -v "${PWD}:/data" osrm/osrm-backend osrm-customize /data/indonesia-latest.osrm

# Run the OSRM server
docker run -d -p 5000:5000 -v "${PWD}:/data" --name osrm-backend osrm/osrm-backend osrm-routed --algorithm mld /data/indonesia-latest.osrm
```

### Running OSRM Inspector with Docker

#### Using Pre-built Image

```bash
# Pull the latest image
docker pull yourusername/osrm-inspector:latest

# Run the container
docker run -d -p 9966:80 --name osrm-inspector yourusername/osrm-inspector:latest
```

#### Building and Running from Source

```bash
# Clone the repository
git clone https://github.com/yourusername/osrm-inspector.git
cd osrm-inspector

# Build the Docker image
docker build -t osrm-inspector .

# Run the container
docker run -d -p 9966:80 --name osrm-inspector osrm-inspector
```

### Configuration

To connect OSRM Inspector to your OSRM backend, you can use one of the following methods:

#### Using Environment Variables

```bash
docker run -d -p 9966:80 \
  -e OSRM_BACKEND_URL=http://your-osrm-host:5000 \
  --name osrm-inspector osrm-inspector
```

#### Using Configuration File

1. Create a custom `config.js` file:

```javascript
const CONFIG = {
  osrmBackendUrl: "http://your-osrm-host:5000",
  map: {
    center: [-0.084039, 106.7709673],
    zoom: 5
  }
  // other configurations...
};
```

2. Run with mounted volume:

```bash
docker run -d -p 9966:80 \
  -v /path/to/your/config.js:/usr/share/nginx/html/config.js \
  --name osrm-inspector osrm-inspector
```

### Accessing the Application

After the container is running, open a web browser and navigate to:

```
http://localhost:9966
```

## üìù Usage Guide

### Basics

1. **Finding a Route**:
   - Click on the map to set a starting point (or enter coordinates in the "Start Point" input)
   - Click again to set an end point (or enter coordinates in the "End Point" input)
   - Click the "Find Route" button to generate the route

2. **Adding Additional Waypoints**:
   - Click the "Add Waypoint" button to add a new waypoint
   - Click on the map to set the waypoint position (or enter coordinates manually)

3. **Working with Profiles**:
   - Select a routing profile (car, bike, foot, etc.) from the dropdown
   - For custom profiles, click the edit icon and enter the profile name

### Advanced Features

1. **Time-Dependent Routing**:
   - Enable "Enable time-dependent routing"
   - Select a departure time using the date-time picker

2. **Importing Waypoints**:
   - Click the "Import CSV/TXT" button
   - Select a file with format: (latitude,longitude) or (longitude,latitude)

3. **Debug Visualization**:
   - Use the "Debug & Visualization" panel to display road network elements:
     - Nodes: Display network nodes
     - Edges: Display edges/roads
     - Cells: Display partition cells
     - Turns: Display turn instructions
     - Speed: Display speed information
     - Road Names: Display road names

4. **Copy/Load Routing URL**:
   - After a route is generated, the routing URL will be displayed in the "Route Information" panel
   - Use the "Copy" button to copy the URL
   - The "Load URL" button allows loading a route from an OSRM URL

## üß© Code Structure

```
osrm-inspector/
‚îú‚îÄ‚îÄ app.js                 # Application entry point
‚îú‚îÄ‚îÄ config.js              # Application configuration
‚îú‚îÄ‚îÄ debug.js               # Debug visualization
‚îú‚îÄ‚îÄ index.html             # Main HTML structure
‚îú‚îÄ‚îÄ map.js                 # Map management and visual layers
‚îú‚îÄ‚îÄ routing.js             # Routing functions
‚îú‚îÄ‚îÄ styles.css             # CSS stylesheet
‚îú‚îÄ‚îÄ sweetalert-helpers.js  # UI dialog helpers
‚îî‚îÄ‚îÄ utils.js               # Common utility functions
```

## üîß Configuration Options

Here are some of the main configuration options that can be customized:

| Option | Description | Default Value |
|--------|-------------|---------------|
| osrmBackendUrl | URL for the OSRM backend | "/api" |
| map.center | Initial map center [lng, lat] | [-0.084039, 106.7709673] |
| map.zoom | Initial map zoom level | 5 |
| routing.colors | Colors for routes based on profile | Object with color definitions |
| routing.lineWeight | Route line thickness | 6 |
| debug.maxNodes | Maximum number of debug nodes displayed | 1000 |

## üîç Troubleshooting

### "No Route Found" Error

- Ensure your OSRM backend is running and accessible
- Check if your start and end points are within the coverage of the map data loaded into OSRM
- Try a different routing profile (e.g., from "driving" to "car")

### Debug Visualization Issues

- Debug features require an OSRM backend with supported endpoints
- Some visualizations may not be available depending on the OSRM version and compatibility

### Container Cannot Connect to OSRM Backend

- Make sure the backend URL is correctly configured in the environment variables or config.js
- If running both containers on the same host, use the Docker container name or Docker network IP for connection

## ü§ù Contributing

Contributions are always welcome! Please open an issue or pull request if you'd like to help improve OSRM Inspector.

## üìÑ License

Distributed under the MIT License. See `LICENSE` for more information.

## üì¢ Acknowledgments

- [OSRM Project](http://project-osrm.org/) - Open Source Routing Machine
- [Leaflet](https://leafletjs.com/) - JavaScript library for interactive maps
- [SweetAlert2](https://sweetalert2.github.io/) - JavaScript library for beautiful dialogs
